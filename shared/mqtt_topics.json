{
  "topics": {
    "sim/imu": {
      "description": "Simulated IMU values",
      "direction": "publisher=simulator, subscriber=esp32_sim",
      "qos_recommended": 0,
      "schema": {
        "type": "object",
        "required": ["ax","ay","az","gx","gy","gz","ts","seq"],
        "properties": {
          "ax": {"type":"number"},
          "ay": {"type":"number"},
          "az": {"type":"number"},
          "gx": {"type":"number"},
          "gy": {"type":"number"},
          "gz": {"type":"number"},
          "ts": {"type":"string", "format":"date-time"},
          "seq": {"type":"integer"}
        }
      }
    },
    "sim/gps": {
      "description": "Simulated GPS location",
      "direction": "publisher=simulator, subscriber=esp32_sim",
      "qos_recommended": 1,
      "schema": {
        "type":"object",
        "required":["lat","lon","ts"],
        "properties":{
          "lat":{"type":"number"},
          "lon":{"type":"number"},
          "alt":{"type":"number"},
          "speed":{"type":"number"},
          "fix":{"type":"integer"},
          "ts":{"type":"string","format":"date-time"}
        }
      }
    },
    "sim/battery": {
      "description": "Simulated Battery condition",
      "direction": "publisher=simulator, subscriber=esp32_sim",
      "qos_recommended": 1,
      "schema": {
        "type":"object",
        "required":["v","soc","ts"],
        "properties":{
          "v":{"type":"number"},
          "soc":{"type":"number"},
          "ts":{"type":"string","format":"date-time"}
        }
      }
    },
    "land/imu": {
      "description": "IMU simulation control",
      "direction": "publisher=station, subscriber=imu_sim",
      "qos_recommended": 0,
      "schema": {
        "type": "object",
        "required": ["amp", "freq", "spike_prob", "spike_amp", "heading", "control"],
        "properties": {
          "amp": {"type": "number"},
          "freq": {"type": "number"},
          "spike_prob": {"type": "number"},
          "spike_amp": {"type": "number"},
          "heading": {"type": "number"},
          "control": {"type": "string", "enum": ["START", "STOP"]}
        }
      }
    },
    "land/gps": {
      "description": "GPS simulation control",
      "direction": "publisher=station, subscriber=gps_sim",
      "qos_recommended": 0,
      "schema": {
        "type": "object",
        "required": ["lat", "lon", "hdg", "spd", "next_lat", "next_lon", "control"],
        "properties": {
          "lat": {"type": "number"},
          "lon": {"type": "number"},
          "hdg": {"type": "number"},
          "spd": {"type": "number"},
          "next_lat": {"type": "number"},
          "next_lon": {"type": "number"},
          "control": {"type": "string", "enum": ["ROUTE", "VECTOR", "STOP"]}
        }
      }
    },
    "sensor/imu": {
      "description": "Re published IMU values from ESP32",
      "direction": "publisher=esp32_sim, subscriber=station",
      "qos_recommended": 0,
      "schema": { "$ref": "#/topics/sim/imu/schema" }
    },
    "sensor/gps": {
      "description": "Re published GPS location from ESP32",
      "direction": "publisher=esp32_sim, subscriber=station",
      "qos_recommended": 1,
      "schema": { "$ref": "#/topics/sim/gps/schema" }
    },
    "sensor/battery": {
      "description": "Re published Battery condition from ESP32",
      "direction": "publisher=esp32_sim, subscriber=station",
      "qos_recommended": 1,
      "schema": { "$ref": "#/topics/sim/battery/schema" }
    },
    "sensor/track": {
      "description": "Radar track detections",
      "direction": "publisher=radar, subscriber=station",
      "qos_recommended": 0,
      "schema": {
        "type": "object",
        "required": ["distance", "heading", "bearing"],
        "properties": {
          "distance": { "type": "number" },
          "heading": { "type": "number" },
          "bearing": { "type": "number" }
        }
      }
    },
    "sensor/radar": {
      "description": "Radar track list",
      "direction": "publisher=radar, subscriber=station",
      "qos_recommended": 0,
      "schema": {
        "type": "object",
        "required": ["tracks"],
        "properties": {
          "tracks": {
            "type": "array",
            "items": {
              "type": "object",
              "required": ["distance", "bearing", "heading"],
              "properties": {
                "distance": { "type": "number" },
                "bearing": { "type": "number" },
                "heading": { "type": "number" }
              }
            }
          }
        }
      }
    },
    "processed/radar": {
      "description": "Processed radar tracks",
      "direction": "publisher=station, subscriber=clients",
      "qos_recommended": 0,
      "schema": { "$ref": "#/topics/sensor/radar/schema" }
    }
  }
}
